Используемые технологии

- **NestJS** — Фреймворк для создания эффективных и масштабируемых приложений на Node.js.
- **TypeORM** — ORM для TypeScript и JavaScript (ES7, ES6, ES5).
- **PostgreSQL** — Мощная система управления реляционными базами данных с открытым исходным кодом.
- **Casual** — Библиотека для генерации случайных данных.
- **Docker** — Для контейнеризации приложения и управления зависимостями.

Настройка проекта

1. Клонируйте репозиторий: git clone <repository-url> ; cd <repository-directory>
2. npm install
3. docker-compose up
4. Доступ к API через http://localhost:8000




Конфигурация БД :
TypeORM настроена для соединения с базой данный используя эти параметры. Лежит в app.module.ts (user-service)

TypeOrmModule.forRoot({
    type: 'postgres',
        host: 'db',
        port: 5432,
        username: 'myuser',
        password: 'mypassword',
        database: 'mydatabase',
        autoLoadEntities: true,
        synchronize: true
})

Конфигурация Docker-Compose
Используется для сборки всего проекта.
nginx - reverse proxy для переадресации запросов
db - контейнер с PostgreSQL для хранения данных
user-service - сервер написанный на NestJS, который взаимодействует с бд

version: "3.4"
services:
nginx:
build: ./nginx
container_name: nginx
restart: unless-stopped
ports:
- "8000:8000"
depends_on:
- db
- user-service
networks:
- combined-network

db:
image: postgres:13
container_name: postgres
environment:
POSTGRES_USER: myuser
POSTGRES_PASSWORD: mypassword
POSTGRES_DB: mydatabase
volumes:
- ./postgres_data:/var/lib/postgresql/data
networks:
- combined-network

user-service:
build: ./user-service
command: npm run start
container_name: user-service
environment:
PORT: 8001
networks:
- combined-network

networks:
combined-network:
driver: bridge


Конечные точки API

Сервис предоставляет следующие конечные точки:
1. Генерация пользователей

   Конечная точка: /user/seed
   Метод: GET
   Описание: Генерирует и вставляет большое количество случайных пользователей в базу данных.
   Параметры запроса:
   count: (Необязательно) Количество пользователей для генерации. По умолчанию 1,000,000, если не указано.

Пример запроса:

GET http://localhost:8000/user/seed?count=1000

Пример ответа:

{
"message": "Successfully added 1000 users"
}

2. Сброс проблем

   Конечная точка: /user/reset-problems
   Метод: GET
   Описание: Сбрасывает поле hasProblems для всех пользователей, у которых это поле установлено в true.

Пример запроса:

GET http://localhost:8000/user/reset-problems

Пример ответа:

{
"message": "500 users had problems reset to false"
}
